---
page_title: "ndfc_links Resource - terraform-provider-ndfc"
subcategory: ""
description: |-
  This resource allows you to configure and manage links between switches in NDFC
---

# ndfc_links (Resource)

This resource allows you to configure and manage links between switches in NDFC

## Example Usage

```hcl
resource "ndfc_links" "test_resource_links_1" {
  source_fabric         = "CML1"
  destination_fabric    = "CML2"
  source_device         = "SERIAL_1"
  destination_device    = "SERIAL_2"
  source_interface      = "Ethernet1/1"
  destination_interface = "Ethernet1/1"
  template_name         = "ext_fabric_setup"
  link_parameters = {
    # Basic Parameters
    "asn"           = "65001"
    "NEIGHBOR_ASN"  = "65002"
    "IP_MASK"       = "192.168.1.1/24"
    "NEIGHBOR_IP"   = "192.168.1.2"
    "IPV6_MASK"     = "2001:db8::1/64"
    "IPV6_NEIGHBOR" = "2001:db8::2"

    # Interface Parameters
    "MTU"        = "9216"
    "DOT1Q_ID"   = "2"
    "PEER1_DESC" = "Link to remote site A"
    "PEER2_DESC" = "Link to remote site B"

    # VRF Parameters
    "AUTO_VRF_LITE_FLAG"            = "false"
    "DEFAULT_VRF_FLAG"              = "false"
    "SYMMETRIC_DEFAULT_VRF_FLAG"    = "false"
    "DEFAULT_VRF_REDIS_BGP_RMAP"    = "extcon-rmap-filter"
    "DEFAULT_VRF_BGP_AUTH_KEY_TYPE" = "3"
    "ENABLE_DCI_TRACKING"           = "false"
    "VRF_LITE_JYTHON_TEMPLATE"      = "Ext_VRF_Lite_Jython"

    # Advanced Parameters
    "PEER1_CONF"                = "no shutdown"
    "PEER2_CONF"                = "no shutdown"
    "PEER_VRF_NAME"             = "default"
    "DEFAULT_VRF_PEER_VRF_NAME" = "default"
  }

}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `destination_device` (String) Destination device serial number
- `destination_fabric` (String) Destination fabric name
- `destination_interface` (String) Destination interface name
- `source_device` (String) Source device serial number
- `source_fabric` (String) Source fabric name
- `source_interface` (String) Source interface name
- `template_name` (String) Template name to use for the link

### Optional

- `link_parameters` (Map of String) Link configuration parameters as key-value pairs

### Read-Only

- `destination_switch_name` (String) Destination switch name
- `is_discovered` (Boolean) Whether the link is discovered
- `is_present` (Boolean) Whether the link is present
- `link_params_computed` (Map of String) Extra parameters computed by NDFC or defaulted from template
- `link_type` (String) Type of link
- `link_uuid` (String) Link UUID
- `source_switch_name` (String) Source switch name



##  Template Parameters - to be filled in `link_parameters` map when the given template is used

Notes: 
*Only few selected templates are documented here. See NDFC documentation for more templates*

Parameters marked as required are mandatory to be filled in the `link_parameters` map.
    For some templates, NDFC requires that empty strings be passed in the API payload for optional parameters.
    It is possible that this parameter may have a restriction in template like minimum length.
    As the provider uses template to validate the payload, if user set an empty string in such cases, for eg: "PEER1_CONF" = "", 
    it will be rejected by template validation as it may fail length validation.
    However if user doesn't fill in this parameter, NDFC will fail with 500 error saying field is missing.
    This is an inconsistency in NDFC template module. To handle this, user should use a valid string for such settings. eg: "PEER1_CONF" = "no shutdown"

### ext_fabric_setup Template

This template configures a link to connect an NDFC-managed fabric to an external non-NDFC fabric.

#### Required Parameters:
- `asn` - BGP Autonomous System Number in Source Fabric
- `NEIGHBOR_ASN` - BGP Autonomous System Number in Destination Fabric
- `IP_MASK` - IP address with subnet mask for source interface (e.g., "192.168.1.1/24")
- `NEIGHBOR_IP` - IP address for destination interface (e.g., "192.168.1.2")

#### Optional Parameters:
- `IPV6_MASK` - IPv6 address with subnet mask for source interface
- `IPV6_NEIGHBOR` - IPv6 address for destination interface
- `MTU` - Interface MTU (576-9216, default: 9216)
- `PEER1_DESC` - Source interface description
- `PEER2_DESC` - Destination interface description
- `PEER1_CONF` - Source interface additional configuration commands
- `PEER2_CONF` - Destination interface additional configuration commands

#### VRF Parameters:
- `AUTO_VRF_LITE_FLAG` - Enable auto generation of VRF Lite configuration (true/false)
- `VRF_LITE_JYTHON_TEMPLATE` - Python template for VRF Lite configuration on NX-OS peer
- `DEFAULT_VRF_FLAG` - Enable auto generation of default VRF configuration (true/false)
- `SYMMETRIC_DEFAULT_VRF_FLAG` - Enable auto generation of default VRF for NX-OS/IOS XE peer
- `DEFAULT_VRF_REDIS_BGP_RMAP` - Route-map for BGP redistribution in default VRF
- `DEFAULT_VRF_BGP_PASSWORD` - BGP password for default VRF
- `DEFAULT_VRF_BGP_AUTH_KEY_TYPE` - BGP authentication key type for default VRF
- `DEFAULT_VRF_PEER_VRF_NAME` - Peer VRF name for default VRF
- `PEER_VRF_NAME` - VRF name on the peer switch

#### Advanced Parameters:
- `ENABLE_DCI_TRACKING` - Enable Data Center Interconnect tracking (true/false)
- `ROUTING_TAG` - Routing tag for the interface

### ext_multisite_underlay_setup Template

This template configures an inter-fabric link specifically for multisite underlay setup.

#### Required Parameters:
- `asn` - BGP Autonomous System Number in Source Fabric
- `NEIGHBOR_ASN` - BGP Autonomous System Number in Destination Fabric
- `IP_MASK` - IP address with subnet mask for source interface
- `NEIGHBOR_IP` - IP address for destination interface

#### Optional Parameters:
- `MTU` - Interface MTU (576-9216, default: 9216)
- `PEER1_DESC` - Source interface description
- `PEER2_DESC` - Destination interface description
- `PEER1_CONF` - Source interface additional configuration commands 
- `PEER2_CONF` - Destination interface additional configuration commands

#### BGP Parameters:
- `BGP_PASSWORD_ENABLE` - Enable BGP password authentication (true/false)
- `BGP_PASSWORD_INHERIT_FROM_MSD` - Inherit BGP password from MSD (true/false)
- `BGP_AUTH_KEY_TYPE` - BGP authentication key type
- `ENABLE_BGP_LOG_NEIGHBOR_CHANGE` - Enable BGP neighbor change logging (true/false)
- `ENABLE_BGP_BFD` - Enable BFD for BGP (true/false)
- `ENABLE_BGP_SEND_COMM` - Enable sending community attributes (true/false)
- `MAX_PATHS` - Maximum number of BGP paths (default: 1)
- `ROUTING_TAG` - Routing tag for the interface
- `DEPLOY_DCI_TRACKING` - Enable Data Center Interconnect tracking (true/false)

### int_intra_fabric_num_link Template

This template configures a numbered link between switches within the same fabric.

#### Required Parameters:
- `PEER1_IP` - IP address for source interface (e.g., "30.1.1.1")
- `PEER2_IP` - IP address for destination interface (e.g., "30.1.1.2")
- `ADMIN_STATE` - Administrative state of the interface (true/false)

#### Optional Parameters:
- `PEER1_V6IP` - IPv6 address for source interface
- `PEER2_V6IP` - IPv6 address for destination interface
- `MTU` - Interface MTU (576-9216, default: 9216)
- `SPEED` - Interface speed (e.g., "Auto")
- `PEER1_DESC` - Source interface description
- `PEER2_DESC` - Destination interface description
- `PEER1_BFD_ECHO_DISABLE` - Disable BFD echo on source (true/false)
- `PEER2_BFD_ECHO_DISABLE` - Disable BFD echo on destination (true/false)
- `ENABLE_MACSEC` - Enable MACsec encryption (true/false)
- `PEER1_CONF` - Source interface additional configuration
- `PEER2_CONF` - Destination interface additional configuration
- `ENABLE_PEER1_DHCP_RELAY` - Enable DHCP relay on source (true/false)
- `ENABLE_PEER2_DHCP_RELAY` - Enable DHCP relay on destination (true/false)

## Important Notes

1. When setting configuration with `PEER1_CONF` and `PEER2_CONF`, ensure that the configuration exactly matches what would appear in `show run` output, including case sensitivity and newlines.

2. For links between different fabrics, use the appropriate template based on your network design:
   - `ext_fabric_setup` for general external fabric connections
   - `ext_multisite_underlay_setup` for multisite underlay connections
   - `ext_fabric_setup_ospf` for OSPF-based external connections

3. For links within the same fabric, use:
   - `int_intra_fabric_num_link` for numbered links
   - `int_intra_fabric_ipv6_link_local` for IPv6 link-local links
   - `int_intra_fabric_unnum_link` for unnumbered links
   - `int_vpc_peer_link` for VPC peer-keep-alive links


