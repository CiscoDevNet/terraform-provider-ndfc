---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "ndfc_rest_api Resource - terraform-provider-ndfc"
subcategory: ""
description: |-
  Resource to execute any REST API on NDFC.
  url - specify the API and method to specify the HTTP method to be used for CRUD operations.payload - specify the payload for the create and update operations.update_url - specify the URL for the update operation. Text/Template supportedupdate_method - specify the HTTP method for the update operation.update_payload - specify the payload for the update operation. Text/Template supporteddelete_url - specify the URL for the delete operations.  Text/Template supporteddelete_method - specify the HTTP method for the delete operation.delete_payload - specify the payload for the delete operation.  Text/Template supporteddelete_parameters - specify the query parameters for the delete operation.stateful - control the execution of the plan:If set to true, the plan will be executed only if there is a change in the config.If set to false, the plan will be executed every time.
---

# ndfc_rest_api (Resource)

Resource to execute any REST API on NDFC.  
-  `url` - specify the API and `method` to specify the HTTP method to be used for CRUD operations.  
-  `payload` - specify the payload for the create and update operations.    
-  `update_url` - specify the URL for the update operation. Text/Template supported
-  `update_method` - specify the HTTP method for the update operation.  
-  `update_payload` - specify the payload for the update operation. Text/Template supported
-  `delete_url` - specify the URL for the delete operations.  Text/Template supported
-  `delete_method` - specify the HTTP method for the delete operation.  
-  `delete_payload` - specify the payload for the delete operation.  Text/Template supported
-  `delete_parameters` - specify the query parameters for the delete operation.
-  `stateful` - control the execution of the plan:  
  - If set to `true`, the plan will be executed only if there is a change in the config.  
  - If set to `false`, the plan will be executed every time.

## Example Usage

```terraform
resource "ndfc_rest_api" "test_resource_rest_api_1" {
  url    = "/lan-fabric/rest/control/policies"
  method = "POST"
  payload = jsonencode(
    {
      "nvPairs" : {
        "IF_NAME" : "ethernet1/20",
        "VRF_NAME" : "red",
        "IP_MASK" : "20.1.1.1/24",
        "NEIGHBOR_IP" : "20.1.1.12",
        "IPv6_MASK" : "",
        "NEIGHBOR_IPv6" : "",
        "NEIGHBOR_ASN" : "86000",
        "asn" : "",
        "bgpPassword" : "",
        "bgpPasswordKeyType" : "",
        "MTU" : "9216",
        "SERIAL_NUMBER" : "",
        "SOURCE" : "",
        "POLICY_ID" : "",
        "ROUTING_TAG" : "",
        "ROUTE_MAP_IN" : "",
        "ROUTE_MAP_OUT" : "",
        "IPV6_ROUTE_MAP_IN" : "",
        "IPV6_ROUTE_MAP_OUT" : "",
        "DESC" : "",
        "CONF" : "",
        "ADMIN_STATE" : "true"
      },
      "entityName" : "SWITCH",
      "entityType" : "SWITCH",
      "source" : "",
      "priority" : 500,
      "description" : "",
      "templateName" : "Ext_VRF_Lite_Routed",
      "serialNumber" : "9TQYTJSZ1VJ"
    }

  )
  stateful      = false
  update_method = "PUT"
  update_payload = jsonencode(
    {
      "nvPairs" : {
        "IF_NAME" : "ethernet1/20",
        "VRF_NAME" : "red",
        "IP_MASK" : "20.1.1.1/24",
        "NEIGHBOR_IP" : "20.1.1.12",
        "IPv6_MASK" : "",
        "NEIGHBOR_IPv6" : "",
        "NEIGHBOR_ASN" : "86000",
        "asn" : "",
        "bgpPassword" : "",
        "bgpPasswordKeyType" : "",
        "MTU" : "9216",
        "SERIAL_NUMBER" : "",
        "SOURCE" : "",
        "POLICY_ID" : "",
        "ROUTING_TAG" : "",
        "ROUTE_MAP_IN" : "",
        "ROUTE_MAP_OUT" : "",
        "IPV6_ROUTE_MAP_IN" : "",
        "IPV6_ROUTE_MAP_OUT" : "",
        "DESC" : "",
        "CONF" : "",
        "ADMIN_STATE" : "true"
      },
      "id" : "{{.id}}",
      "entityName" : "SWITCH",
      "entityType" : "SWITCH",
      "source" : "",
      "priority" : 500,
      "description" : "New description",
      "templateName" : "Ext_VRF_Lite_Routed",
      "serialNumber" : "9TQYTJSZ1VJ"
    }

  )
  update_url = "/lan-fabric/rest/control/policies/{{.policyId}}"
  delete_url = "/lan-fabric/rest/control/policies/{{.policyId}}"
  delete_payload = jsonencode(
    {
      "nvPairs" : {
        "IF_NAME" : "ethernet1/20",
        "VRF_NAME" : "red",
        "IP_MASK" : "20.1.1.1/24",
        "NEIGHBOR_IP" : "20.1.1.12",
        "IPv6_MASK" : "",
        "NEIGHBOR_IPv6" : "",
        "NEIGHBOR_ASN" : "86000",
        "asn" : "",
        "bgpPassword" : "",
        "bgpPasswordKeyType" : "",
        "MTU" : "9216",
        "SERIAL_NUMBER" : "",
        "SOURCE" : "",
        "POLICY_ID" : "",
        "ROUTING_TAG" : "",
        "ROUTE_MAP_IN" : "",
        "ROUTE_MAP_OUT" : "",
        "IPV6_ROUTE_MAP_IN" : "",
        "IPV6_ROUTE_MAP_OUT" : "",
        "DESC" : "",
        "CONF" : "",
        "ADMIN_STATE" : "true"
      },
      "id" : "{{.id}}",
      "deleted" : true,
      "entityName" : "SWITCH",
      "entityType" : "SWITCH",
      "source" : "",
      "priority" : 500,
      "description" : "New description",
      "templateName" : "Ext_VRF_Lite_Routed",
      "serialNumber" : "9TQYTJSZ1VJ"
    }

  )
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `method` (String) Method to use GET/POST/PUT
- `payload` (String) Payload to send for CREATE/UPDATE operations
- `url` (String) URL to be used for operations - mainly CREATE

### Optional

- `delete_method` (String) Method to use for delete operation. If not specified, DELETE is used
- `delete_parameters` (String) Query parameters for DELETE API if any; format is key1=value1&key2=value2
- `delete_payload` (String) Payload to send for delete operation. Ignored if the method is `DELETE`
This field supports Text/template. Use `{{.field_name}}` to refer to a field from the `response_message`
- `delete_url` (String) URL to be used for delete operation. If not specified, the same URL as the create URL is used
- `read_url` (String) URL to be used for GET(Read) operation. If not specified Read does not query NDFC
This field supports Text/template. Use `{{.field_name}}` to refer to a field from the `response_message`
The response from the GET operation is used to overwrite `payload`
Note: The GET response must be an exact match of `payload`
- `stateful` (Boolean) Stateful set to true triggers update only when something changes in config. If set to false every plan shows changes
- `update_method` (String) Method to use for update operation. PUT is used if not specified
- `update_payload` (String) Payload to send for update operation. If not specified, the same payload as the create payload is used
This field supports Text/template. Use `{{.field_name}}` to refer to a field from the `response_message`
- `update_url` (String) URL to be used for update operation. If not specified, the same URL as the create URL is used
This field supports Text/template. Use `{{.field_name}}` to refer to a field from the `response_message`

### Read-Only

- `id` (String) ID of the policy
- `response_message` (String) Response message from the API for the Create/Update operation
This field is used for template replacements of the `update_url`, `update_payload`, `delete_url`, `delete_payload` if they contain go template fields like `{{.field_name}}`
