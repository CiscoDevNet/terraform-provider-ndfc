// Code generated by terraform-plugin-framework-generator DO NOT EDIT.

package resource_policy

import (
	"context"
	"github.com/hashicorp/terraform-plugin-framework/path"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/booldefault"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/int64default"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/int64planmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/planmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/setplanmodifier"
	"github.com/hashicorp/terraform-plugin-framework/resource/schema/stringplanmodifier"
	"github.com/hashicorp/terraform-plugin-framework/types"

	"github.com/hashicorp/terraform-plugin-framework/resource/schema"
)

func PolicyResourceSchema(ctx context.Context) schema.Schema {
	return schema.Schema{
		Attributes: map[string]schema.Attribute{
			"auto_generated": schema.BoolAttribute{
				Computed:            true,
				Description:         "Auto generated policy",
				MarkdownDescription: "Auto generated policy",
			},
			"computed_parameters": schema.MapAttribute{
				ElementType:         types.StringType,
				Computed:            true,
				Description:         "List of name value pairs not set in config, but returned by NDFC",
				MarkdownDescription: "List of name value pairs not set in config, but returned by NDFC",
			},
			"deploy": schema.BoolAttribute{
				Optional:            true,
				Computed:            true,
				Description:         "Deploy policy",
				MarkdownDescription: "Deploy policy",
				Default:             booldefault.StaticBool(false),
			},
			"description": schema.StringAttribute{
				Optional:            true,
				Description:         "Description of the policy",
				MarkdownDescription: "Description of the policy",
			},
			"entity_name": schema.StringAttribute{
				Required:            true,
				Description:         "Policy Name",
				MarkdownDescription: "Policy Name",
			},
			"entity_type": schema.StringAttribute{
				Required:            true,
				Description:         "Type of the entity",
				MarkdownDescription: "Type of the entity",
			},
			"generated_config": schema.StringAttribute{
				Computed:            true,
				Description:         "Generated configuration",
				MarkdownDescription: "Generated configuration",
			},
			"id": schema.Int64Attribute{
				Computed:            true,
				Description:         "ID of the policy",
				MarkdownDescription: "ID of the policy",
				PlanModifiers: []planmodifier.Int64{
					int64planmodifier.UseStateForUnknown(),
				},
			},
			"is_policy_group": schema.BoolAttribute{
				Optional:            true,
				Computed:            true,
				Description:         "Policy Group",
				MarkdownDescription: "Policy Group",
				Default:             booldefault.StaticBool(false),
			},
			"policy_id": schema.StringAttribute{
				Computed:            true,
				Description:         "Policy ID",
				MarkdownDescription: "Policy ID",
				PlanModifiers: []planmodifier.String{
					stringplanmodifier.UseStateForUnknown(),
				},
			},
			"policy_parameters": schema.MapAttribute{
				ElementType:         types.StringType,
				Optional:            true,
				Description:         "List of name value pairs",
				MarkdownDescription: "List of name value pairs",
			},
			"priority": schema.Int64Attribute{
				Optional:            true,
				Computed:            true,
				Description:         "Priority of the policy",
				MarkdownDescription: "Priority of the policy",
				Default:             int64default.StaticInt64(500),
			},
			"serial_numbers": schema.SetAttribute{
				ElementType:         types.StringType,
				Required:            true,
				Description:         "Serial numbers of the device. Use only one device for policy. Multiple devices can be in the list if this is a  policygroup",
				MarkdownDescription: "Serial numbers of the device. Use only one device for policy. Multiple devices can be in the list if this is a  policygroup",
				PlanModifiers: []planmodifier.Set{
					setplanmodifier.RequiresReplaceIf(func(ctx context.Context, req planmodifier.SetRequest, resp *setplanmodifier.RequiresReplaceIfFuncResponse) {

						var IsPolicyGroup types.Bool
						diags := req.Plan.GetAttribute(ctx, path.Root("is_policy_group"), &IsPolicyGroup)
						if diags.HasError() || IsPolicyGroup.IsNull() {
							resp.RequiresReplace = false
							return
						}
						if IsPolicyGroup.ValueBool() == false {
							resp.RequiresReplace = true
						} else {
							resp.RequiresReplace = false
						}

					}, "Needs replacement", ""),
				},
			},
			"source": schema.StringAttribute{
				Optional:            true,
				Description:         "Source of the policy",
				MarkdownDescription: "Source of the policy",
			},
			"template_name": schema.StringAttribute{
				Required:            true,
				Description:         "Name of the template",
				MarkdownDescription: "Name of the template",
				PlanModifiers: []planmodifier.String{
					stringplanmodifier.RequiresReplace(),
				},
			},
		},
		Description:         "Resource to configure policies on a switch",
		MarkdownDescription: "Resource to configure policies on a switch",
	}
}

type PolicyModel struct {
	AutoGenerated      types.Bool   `tfsdk:"auto_generated"`
	ComputedParameters types.Map    `tfsdk:"computed_parameters"`
	Deploy             types.Bool   `tfsdk:"deploy"`
	Description        types.String `tfsdk:"description"`
	EntityName         types.String `tfsdk:"entity_name"`
	EntityType         types.String `tfsdk:"entity_type"`
	GeneratedConfig    types.String `tfsdk:"generated_config"`
	Id                 types.Int64  `tfsdk:"id"`
	IsPolicyGroup      types.Bool   `tfsdk:"is_policy_group"`
	PolicyId           types.String `tfsdk:"policy_id"`
	PolicyParameters   types.Map    `tfsdk:"policy_parameters"`
	Priority           types.Int64  `tfsdk:"priority"`
	SerialNumbers      types.Set    `tfsdk:"serial_numbers"`
	Source             types.String `tfsdk:"source"`
	TemplateName       types.String `tfsdk:"template_name"`
}
